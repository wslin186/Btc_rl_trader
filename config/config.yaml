# ================================================================
# ğŸ“  btc_rl_trader / config /config.yaml
# ================================================================

# ------------------------------------------------------------------
# 1ï¸âƒ£  æ•°æ®ä¸‹è½½
# ------------------------------------------------------------------
download:
  trading_type:  spot
  symbols:      ["BTCUSDT"]
  intervals:    ["1h"]
  start_date:    2017-08-01
  end_date:      2025-04-30
  skip_monthly:  0
  skip_daily:    1
  checksum:      0
  threads:       8
  frequency:     "@daily"       # å¯é€‰
  enable_cron:   false

# ------------------------------------------------------------------
# 2ï¸âƒ£  æ•°æ®é›†åŒºé—´ / è·¯å¾„
# ------------------------------------------------------------------
data:
  processed_path: data/processed/btc.parquet

  train_start:  2017-08-01
  train_end:    2023-12-31
  test_start:   2024-01-01
  test_end:     2025-04-30

  train_ratio:  null            # æ˜¾å¼åŒºé—´æ—¶ä¿æŒ null

# ------------------------------------------------------------------
# 3ï¸âƒ£  ç¯å¢ƒå‚æ•°
# ------------------------------------------------------------------
env:
  window_size: 100         # å¢åŠ è§‚å¯Ÿçª—å£å¤§å°
  init_cash:   100000
  fee:         0.0004
  slippage:    0.0002
  reward_scale: 200        # æ”¾å¤§å¯¹æ•°å›æŠ¥
  action_reward: 0.5     # åŠ¨ä½œåˆ‡æ¢é¢å¤–å¥–åŠ±
  trade_penalty: 0.0001     # äº¤æ˜“æƒ©ç½š
  sharpe_coef: 0.2        # å¤æ™®æ¯”ç‡å¥–åŠ±ç³»æ•°

# ------------------------------------------------------------------
# 4ï¸âƒ£  PPO åŸºç¡€è¶…å‚
# ------------------------------------------------------------------
ppo:
  policy:          MlpPolicy
  total_timesteps: 2_000_000
  n_steps:         512
  batch_size:      128
  learning_rate:   0.0001
  gamma:           0.99
  gae_lambda:      0.95
  ent_coef:        0.1            # å¢åŠ ç†µç³»æ•°ä¿ƒè¿›æ›´å¤šæ¢ç´¢
  vf_coef:         0.5
  clip_range:      0.2
  max_grad_norm:   0.5
  n_epochs:        8              # å¢åŠ æ¯æ‰¹æ¬¡è®­ç»ƒè½®æ•°
  total_timesteps: 2000000 # å¢åŠ è®­ç»ƒæ—¶é—´æ­¥
  target_kl:       0.01
  verbose:         1
  tensorboard_log: logs/tb
  seed:            42
  device:          auto

# ------------------------------------------------------------------
# 5ï¸âƒ£  å¹¶è¡Œè®­ç»ƒï¼ˆSubprocVecEnvï¼‰
# ------------------------------------------------------------------
training:
  n_envs:          8            # å¹¶è¡Œç¯å¢ƒæ•°
  n_steps:         512          # æ¯ç¯å¢ƒæ ·æœ¬æ•° => 8*512=4096
  total_timesteps: 2_000_000
  eval_episodes:   20           # è¯„ä¼°å›åˆæ•°

# ------------------------------------------------------------------
# 6ï¸âƒ£  æ¨¡å‹ä¸æ—¥å¿—è·¯å¾„
# ------------------------------------------------------------------
paths:
  model_dir:  models
  model_name: ppo_btc_latest.zip

tensorboard:
  enable:  true
  log_dir: logs/tb
  host:    127.0.0.1
  port:    6006

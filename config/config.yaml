# ================================================================
# ğŸ“  btc_rl_trader / config /config.yaml
# ================================================================

# ------------------------------------------------------------------
# 1ï¸âƒ£  æ•°æ®ä¸‹è½½
# ------------------------------------------------------------------
download:
  trading_type:  spot
  symbols:      ["BTCUSDT"]
  intervals:    ["1h"]
  start_date:    2017-08-01
  end_date:      2025-04-30
  skip_monthly:  0
  skip_daily:    1
  checksum:      0
  threads:       8
  # ä»¥ä¸‹ä¸¤é¡¹å¦‚æœæœªä½¿ç”¨å¯è€ƒè™‘åˆ é™¤
  frequency:     "@daily"       # å¯é€‰
  enable_cron:   false

# ------------------------------------------------------------------
# 2ï¸âƒ£  æ•°æ®é›†åŒºé—´ / è·¯å¾„
# ------------------------------------------------------------------
data:
  processed_path: data/processed/btc.parquet

  train_start:  2017-08-01
  train_end:    2023-12-31
  test_start:   2024-01-01
  test_end:     2025-04-30

  train_ratio:  null            # æ˜¾å¼åŒºé—´æ—¶ä¿æŒ null

# ------------------------------------------------------------------
# 3ï¸âƒ£  ç¯å¢ƒå‚æ•°
# ------------------------------------------------------------------
env:
  window_size: 100         # ä¿æŒä¸å˜
  init_cash:   100000      # åˆå§‹èµ„é‡‘
  fee:         0.0004      # äº¤æ˜“æ‰€æ‰‹ç»­è´¹
  slippage:    0.0002      # æ»‘ç‚¹
  reward_scale: 5          # é™ä½å¥–åŠ±å°ºåº¦ï¼Œå‡å°‘æ¨¡å‹è¿‡æ¿€ååº” 10->5
  action_reward: 0.02      # æé«˜åŠ¨ä½œå¥–åŠ±ï¼Œé¼“åŠ±æ˜ç¡®çš„å†³ç­– 0.01->0.02
  trade_penalty: 0.1       # æé«˜äº¤æ˜“æƒ©ç½šï¼Œè¿›ä¸€æ­¥é™ä½è¿‡åº¦äº¤æ˜“ 0.25->0.1
  sharpe_coef: 1.0         # å¢åŠ å¤æ™®ç³»æ•°ï¼Œæ›´å¼ºè°ƒç¨³å®šæ”¶ç›Š
  position_steps: 1        # å…¨ä»“æ¨¡å¼
  use_stop_loss: true      # ä¿æŒæ­¢æŸåŠŸèƒ½
  stop_loss_pct: 0.1      # æ­¢æŸçº¿è®¾ç½®
  position_penalty_ratio: 0.7  # æé«˜æŒä»“æƒ©ç½šï¼Œå¢å¼ºé£é™©æ„è¯†
  stop_loss_penalty_ratio: 2.5  # ç•¥å¾®æé«˜æ­¢æŸæƒ©ç½š
  trade_cooldown: 3       # å¢åŠ äº¤æ˜“å†·å´æ—¶é—´ï¼Œå‡å°‘é¢‘ç¹äº¤æ˜“
  balance_buy_sell: false   # ä¿æŒå¹³è¡¡ä¹°å–
# ------------------------------------------------------------------
# 4ï¸âƒ£  PPO åŸºç¡€è¶…å‚
# ------------------------------------------------------------------
ppo:
  policy:          MlpPolicy
  n_steps:         2048          # åŠ å€æ­¥æ•°ï¼Œæ•è·æ›´é•¿æœŸçš„å¸‚åœºæ¨¡å¼
  batch_size:      512           # å¢åŠ æ‰¹æ¬¡å¤§å°ï¼Œæé«˜è®­ç»ƒç¨³å®šæ€§
  learning_rate:   0.0001        # ç•¥å¾®æé«˜å­¦ä¹ ç‡ï¼ŒåŠ é€Ÿæ”¶æ•›
  gamma:           0.998         # æé«˜æœªæ¥å¥–åŠ±æŠ˜æ‰£å› å­ï¼Œæ›´æ³¨é‡é•¿æœŸå›æŠ¥ 0.995->0.998
  gae_lambda:      0.96          # å¾®è°ƒGAEå‚æ•°
  ent_coef:        0.001         # é™ä½ç†µç³»æ•°ï¼Œå‡å°‘éšæœºæ¢ç´¢ 0.0005->0.001
  vf_coef:         0.8           # å¢åŠ ä»·å€¼å‡½æ•°ç³»æ•°
  clip_range:      0.2
  max_grad_norm:   0.7           # æé«˜æ¢¯åº¦è£å‰ªé˜ˆå€¼
  n_epochs:        15            # å¢åŠ æ¯æ‰¹æ¬¡è®­ç»ƒè½®æ•°ï¼Œæé«˜æ ·æœ¬åˆ©ç”¨æ•ˆç‡
  total_timesteps: 5000000       # ç¿»å€è®­ç»ƒæ­¥æ•°ï¼Œæé«˜æ¨¡å‹æ€§èƒ½
  target_kl:       0.015         # ç¨å¾®æ”¾å®½KLæ•£åº¦é™åˆ¶
  verbose:         1
  tensorboard_log: logs/tb
  seed:            42
  device:          auto

# ------------------------------------------------------------------
# 5ï¸âƒ£  å¹¶è¡Œè®­ç»ƒï¼ˆSubprocVecEnvï¼‰
# ------------------------------------------------------------------
training:
  n_envs:          8           # å¢åŠ å¹¶è¡Œç¯å¢ƒæ•°ä»¥åŠ é€Ÿè®­ç»ƒ
  n_steps:         2048         # ä¿æŒä¸PPOä¸€è‡´
  total_timesteps: 5000000     # ä¸PPOä¿æŒä¸€è‡´
  eval_episodes:   50           # å¢åŠ è¯„ä¼°å›åˆæ•°ï¼Œæé«˜è¯„ä¼°å‡†ç¡®æ€§

# ------------------------------------------------------------------
# 6ï¸âƒ£  æ¨¡å‹ä¸æ—¥å¿—è·¯å¾„
# ------------------------------------------------------------------
paths:
  model_dir:  models
  model_name: ppo_btc_latest.zip

tensorboard:
  enable:  true
  log_dir: logs/tb
  host:    127.0.0.1
  port:    6006

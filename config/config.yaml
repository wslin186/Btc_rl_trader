# ================================================================
# 📁  btc_rl_trader / config /config.yaml
# ================================================================

# ------------------------------------------------------------------
# 1️⃣  数据下载
# ------------------------------------------------------------------
download:
  trading_type:  spot
  symbols:      ["BTCUSDT"]
  intervals:    ["1h"]
  start_date:    2017-08-01
  end_date:      2025-04-30
  skip_monthly:  0
  skip_daily:    1
  checksum:      0
  threads:       8
  frequency:     "@daily"       # 可选
  enable_cron:   false

# ------------------------------------------------------------------
# 2️⃣  数据集区间 / 路径
# ------------------------------------------------------------------
data:
  processed_path: data/processed/btc.parquet

  train_start:  2017-08-01
  train_end:    2023-12-31
  test_start:   2024-01-01
  test_end:     2025-04-30

  train_ratio:  null            # 显式区间时保持 null

# ------------------------------------------------------------------
# 3️⃣  环境参数
# ------------------------------------------------------------------
env:
  window_size: 50
  init_cash:   10000
  fee:         0.0004
  slippage:    0.0002
  reward_scale: 100        # ← 新增
  action_reward: 0.01      # ← 新增

# ------------------------------------------------------------------
# 4️⃣  PPO 基础超参
# ------------------------------------------------------------------
ppo:
  policy:          MlpPolicy
  total_timesteps: 2_000_000
  n_steps:         512          # 会被 training.n_steps 覆盖
  batch_size:      512
  learning_rate:   0.0003
  gamma:           0.995
  gae_lambda:      0.97
  ent_coef:        0.005
  vf_coef:         0.5
  clip_range:      0.2
  max_grad_norm:   0.5

# ------------------------------------------------------------------
# 5️⃣  并行训练（SubprocVecEnv）
# ------------------------------------------------------------------
training:
  n_envs:          8            # 并行环境数
  n_steps:         512          # 每 env 样本数 => 2048/batch
  total_timesteps: 2_000_000

# ------------------------------------------------------------------
# 6️⃣  模型与日志路径
# ------------------------------------------------------------------
paths:
  model_dir:  models
  model_name: ppo_btc_latest.zip

tensorboard:
  enable:  true
  log_dir: logs/tb
  host:    127.0.0.1
  port:    6006
